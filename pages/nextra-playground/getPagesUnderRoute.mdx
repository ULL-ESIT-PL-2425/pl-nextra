## getPagesUnderRoute

This function is imported from file [nextra/context.js](https://github.com/shuding/nextra/blob/29086aa11874dcf2701b99a2fe4db512de83f8de/packages/nextra/src/context.ts#L87)

```js
import { getPagesUnderRoute } from 'nextra/context'
```

When called with a string as argument, it returns an array of `Page` objects that are under the route passed as argument. Here it is the source code:


```ts
export function getPagesUnderRoute(route: string): Page[] {
  const { pageMap } = getContext('getPagesUnderRoute')
  return filter(pageMap, route).activeLevelPages
}
```

it returns an array of `Page` objects that are under the route passed as argument. The `Page` type is defined as follows:


```ts
export type Page = (MdxFile | Folder<Page>) & {
  meta?: Exclude<Meta, string>
}
```

What seems to be interesting is the `frontMatter` property of the `MdxFile` type. 


```ts
export type FrontMatter = GrayMatterFile<string>['data']
export type Meta = string | Record<string, any>

export type MdxFile<FrontMatterType = FrontMatter> = {
  kind: 'MdxPage'
  name: string
  route: string
  locale?: string
  frontMatter?: FrontMatterType
}
```

This way we can access the `frontMatter` of the `MdxFile` object and use it to filter the pages we want to display. Here is an example of such a page:

```js
 {
    kind: 'MdxPage',
    name: '2024-01-23-leccion',
    route: '/clases/january/2024-01-23-leccion',
    frontMatter: {
      title: 'Tuesday 2024/01/23',
      published: true,
      summary: 'Encuesta. Primeras prácticas. Un vistazo a las primeras etapas de un compilador: análisis léxico',
      labs: [Array],
      topics: [Array],
      videos: [Array]
    },
    meta: { title: 'Tuesday 2024/01/23' }
}
```

- Other properties are `name` and `route` that can be used to build links to the pages.
- The attribute `kind` is a string that can have the value `'MdxPage'` or `'Folder'` and it is used to distinguish between pages and folders.

Here is an example of `Folder` object:

```js
{
    kind: 'Folder',
    name: 'tree-transformations',
    route: '/topics/tree-transformations',
    children: [ [Object], ... [Object] ],
    meta: { title: 'Tree Transformations' }
  },
```
The `children` of a `Folder` is an array of `FileType` objects:

```ts
export interface Folder<FileType = PageMapItem> {
  kind: 'Folder'
  name: string
  route: string
  children: FileType[]
}

export type PageMapItem = Folder | MdxFile | MetaJsonFile
```

The following is the code of a version of the [CollectionPage](https://github.com/ULL-ESIT-PL-2324/pl-nextra/blob/main/components/collectionPage.jsx) component in this notes:

```jsx
import Link from 'next/link'
import { useRouter } from 'next/router'
import { getPagesUnderRoute } from 'nextra/context'
import filterRouteLocale from 'nextra/filter-route-locale'
import styles from './counters.module.css'
import LabInfo from '@/components/LabInfo'
import ClassInfo from '@/components/ClassInfo'

export function CollectionPage({ path }) {
  const { locale, defaultLocale } = useRouter()
  const pages = getPagesUnderRoute(path)
  let result = filterRouteLocale(pages, locale, defaultLocale).map(page => {
      if (page.frontMatter?.display === 'hidden') return null
      return (
        <li key={page.route}>
          <Link className={styles.link} href={page.route}>{page.meta?.title || page.frontMatter?.title || page?.name}</Link>
          {path === '/labs' && <LabInfo page={page} />} 
          {path.startsWith('/clases') &&  <ClassInfo page={page} />} 
        </li>
       )
    })
    return (<ol className={styles.myList} reversed>{result}</ol>)
}
```

- Here is the code of the [LabInfo](https://github.com/crguezl/pl-nextra/blob/main/components/LabInfo.jsx) component used in the former example.
- Here is the code of the [ClassInfo](https://github.com/crguezl/pl-nextra/blob/main/components/ClassInfo.jsx) component used in the former example.


## Example

The following code is an example of how to use the `getPagesUnderRoute` function to build a list of links to the pages under the route `/labs`:

```jsx

import GetSpecific from '@/components/getSpecific'

<GetSpecific path="/labs"/>
```

The following is the code of the `getSpecific` component:

```jsx
import Link from 'next/link'
import { getPagesUnderRoute } from 'nextra/context'
import filterRouteLocale from 'nextra/filter-route-locale'
import { useRouter } from 'next/router'
import styles from './counters.module.css'

import React from 'react'

export default function getSpecific({ path }) {
    const { locale, defaultLocale } = useRouter()
    const pages = getPagesUnderRoute(path)
    //console.error(pages)
    let result = filterRouteLocale(pages, locale, defaultLocale).map(page => {
        if (page.frontMatter?.display === 'hidden') return null
        return (
          <li key={page.route}>
            <Link className={styles.link} href={page.route}>{page.meta?.title || page.frontMatter?.title || page?.name}</Link> {page.frontMatter?.key} 
          </li>
         )
      })
      return (<ol className={styles.myList} reversed>{result}</ol>)
}
```

Here is the output of the former code:

---

import GetSpecific from '@/components/getSpecific'

<GetSpecific path="/labs"/>