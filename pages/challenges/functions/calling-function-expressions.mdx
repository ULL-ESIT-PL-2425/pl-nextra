---
practica: functions
grupo: 
date: 2023/03/07
time: 8:30
---
import { Link, frontmatter} from '@/src/frontmatter'
import { Callout } from 'nextra/components'

# Challenge for lab {frontmatter().practica}

## Goal

<Callout type="info" emoji="️🎓"> 

A fact of interest is that the extension of the arithmetics operations you have made on this lab can lead to rethinking a bit the syntax. For example, why not extend the call syntax to allow calls of the form `(f+g*h)(x)(y)`
or `(f+3)(x)`?

For example, given the login program:

```js showLineNumbers {3} filename="test/data/input/test-fun-call.calc"
f = fun(x) { x+1 },
g = fun(x) { x+2 },
print((f+g)(3)) # 9
```

This would be the expected behavior:

```js showLineNumbers {16}
➜ functions-solution git:(extendedcalls) ✗ bin/calc2js.mjs test/data/input/test-fun-call.calc
#!/usr/bin/env node
const Complex = require("/Users/casianorodriguezleon/campus-virtual/2223/pl2223/practicas/functions/functions-solution/src/complex.js");
const print = x => { console.log(x); return x; };
let $f, $g;

(
  $f = function($x) {
     return $x.add(Complex("1"));
  }, 
  $g = function($x) {
     return $x.add(Complex("2"));
  }
), 
print(
  $f.add($g)(Complex("3"))
);
```
Which when executed gives rise to:

```
➜ functions-solution git:(extendedcalls) ✗ bin/calc2js.mjs test/data/input/test-fun-call.calc | node -
  -
{ re: 9, im: 0 }
```
</Callout>

Extend your grammar to support this new syntax: **after an expression between parenthesis can follow calls**. 
The use of parenthesis is needed to avoid ambiguities and conflicts in the grammar.

## Tests

Add tests for the new functionality.